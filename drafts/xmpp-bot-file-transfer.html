<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Keith's Blog</title>
	<meta name="description" content="">
	<meta name="author" content="Keith Gray">

	<!-- HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="/theme/html5.js"></script>
	<![endif]-->

	<!-- Styles -->
	<link href="/theme/bootstrap.min.css" rel="stylesheet">
	<link href="/theme/local.css" rel="stylesheet">
	<link href="/theme/pygments.css" rel="stylesheet">

	<!-- Feeds -->



        <link href="feeds/rss.xml" rel="alternate" title="Keith's Blog" type="application/rss+xml">

<script type="text/javascript">
	var disqus_identifier = "drafts/xmpp-bot-file-transfer.html";
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = 'http://keithgraysblog.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
</head>
<body>
<a href="http://github.com/idahogray/"><img style="position: absolute; top: 39px; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub" /></a>
	<div class="topbar">
	  <div class="topbar-inner">
		<div class="container-fluid">
		  <a class="brand" href="/">Keith's Blog</a>
			<ul class="nav">
					<li ><a href="/category/kids.html">kids</a></li>
					<li ><a href="/category/personal.html">personal</a></li>
					<li class="active"><a href="/category/work.html">work</a></li>
			</ul>
			<p class="pull-right"><a href="/archives.html">[archives]</a> <a href="/tags.html">[tags]</a></p>
		</div>
	  </div>
	</div>

	<div class="container-fluid">
	  <div class="sidebar">
		<div class="well">
			<h3>Blogroll</h3>
			<ul>
				<li><a href="http://www.powereng.com">POWER Engineers</a></li>
				<li><a href="http://python.org">Python.org</a></li>
				<li><a href="http://docs.notmyidea.org/alexis/pelican/">Pelican</a></li>
				<li><a href="http://jinja.pocoo.org">Jinja2</a></li>
			</ul>
			<div class="social">
			<h3>Social</h3>
			<ul>
				<li><a href="http://twitter.com/idahogray">twitter</a></li>
				<li><a href="http://github.com/idahogray">github</a></li>
			</ul>
			</div>
		</div>
	  </div>
	  <div class="content">
	<div class='article'>
		<div class="page-header"><h1>XMPP Bot File Transfer</h1></div>
		<div class="well small">Permalink: <a class="more" href="/drafts/xmpp-bot-file-transfer.html">2014-06-21 00:00:00-05:00</a>
by <a class="url fn" href="/author/keith-gray.html">Keith Gray </a>
 in <a href="/category/work.html">work</a>
tags: <a href="/tag/python-xmpp-programming.html">python xmpp programming</a> </div>
		<div><div class="section" id="purpose">
<h2>Purpose</h2>
<p>I have set up a XMPP server at work. People from all over our business unit use
the server to chat with each other. I have been thinking about writing a bot
to help automate some tasks. One of the first tasks I wanted to automate was
getting a project's status report from our intranet. I am imagining that a user
would send the project number to the bot, the bot would download the report,
the bot would then use XMPP to transfer the file to the user.</p>
</div>
<div class="section" id="tools">
<h2>Tools</h2>
<p>I have been doing a bit of Python programming over the last few years and I
wanted to write the bot in Python. A few of the libraries I looked at did not
support file transfer and I eventually settled on the <a class="reference external" href="https://github.com/fritzy/SleekXMPP">SleekXMPP</a> library. The
server is running <a class="reference external" href="http://www.ejabberd.im/">ejabberd</a>. Most, if not all, of the users are running
<a class="reference external" href="https://pidgin.im/">Pidgin</a> as their XMPP client.</p>
</div>
<div class="section" id="first-try">
<h2>First Try</h2>
<p>After doing some initial research, I determined that there were two ways to
do file transfer with XMPP. The first was in-band bytestreams (ibb) (XEP-0047).
The second method was SOCKS5 bytestreams (XEP-0065).</p>
<p>IBB appeared to be the easier of the two methods even with the understanding
that ibb was intended for small transfers. I decided to give ibb a shot.</p>
<div class="section" id="echobot">
<h3>EchoBot</h3>
<p>I first built the example in the SleekXMPP README file. It is called EchoBot.
The bot connects to the server and echos back everything that is said to it.
The only thing I had to change in order for it to work with my set up was to
pass the server IP and TCP port as a tuple to the connect() method.</p>
<p>The source for this first version of <a class="reference external" href="https://bitbucket.org/idahogray/xmpp-bot/src/bb92bc4f6808f8d5c381e7ef6df77e2379cd98a4/xmpp_bot/echo_bot.py?at=default">EchoBot</a> is hosted at bitbucket.org.</p>
</div>
<div class="section" id="ibb">
<h3>IBB</h3>
<p>Once I was able to successfully connect to the server, receive messages, and
send messages I attempted file transfer.</p>
</div>
</div>
</div>
		<div>
			<h2>Comments</h2>
<div id="disqus_thread"></div>		<div>
	</div>
		<footer>
		  <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme based on <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a>.</p>
		  <p>&copy; Keith Gray</p>
		</footer>
	  </div>

	</div>
</body>
</html>